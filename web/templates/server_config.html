{% extends 'layout/_layout.html' %}

{% load count_instance %}

{% block css %}

    <!--<link rel="stylesheet" type="text/css" href="/static/plugins/select2/select2_metro.css" />
    <link rel="stylesheet" href="/static/plugins/data-tables/DT_bootstrap.css" />-->

    <link href="/static/plugins/bootstrap/css/bootstrap-table.css" rel="stylesheet" />

{% endblock %}

{% block conent %}

    <ol class="breadcrumb" style="margin-bottom: 0;">
        <div class='btn-group btn-group-xs'>
            <a type="button" class="btn btn-default btn-arrow-right btn-arrow-left:before" style="color:#1c5a9c; padding-left:10px"><span class="glyphicon glyphicon-home" aria-hidden="true"></span> Dashboard</a>
            <a type="button" class="btn btn-default btn-arrow-right" style="color:#1c5a9c;" href="/server.html"><span class="glyphicon glyphicon-th-list" aria-hidden="true"></span> Application</a>
            <a type="button" class="btn btn-default btn-arrow-right" style="color:#1c5a9c;" href="{% url 'server-config' response.data.id %}"><span class="glyphicon glyphicon-cog" aria-hidden="true"></span> {{ response.data.name }} Config</a>
        </div>
    </ol>

    <div style="padding: 10px 8px;">

        <div style="">

            <nav class="navbar navbar-default" role="navigation" style="margin-bottom: 0">
                <div class="container-fluid" style="padding-left: 0">
                    <div>
                        <ul class="nav navbar-nav">
                            <li role="presentation" id="basic_switch" style="border-right: 1px solid #e7e7e7"><a class="no-radius" href="#basic" aria-controls="basic" role="tab" data-toggle="tab"><span class="glyphicon 	glyphicon glyphicon-th-large"></span> Basic Info</a></li>
                            <li role="presentation" id="group_management_switch" style="border-right: 1px solid #e7e7e7"><a class="no-radius" href="#group_management" aria-controls="group_management" role="tab" data-toggle="tab">Groups <span class="badge"></span></a></li>
                            <li role="presentation" id="instance_management_switch" style="border-right: 1px solid #e7e7e7"><a class="no-radius" href="#instance_management" aria-controls="instance_management" role="tab" data-toggle="tab">Instances <span class="badge"></span></a></li>
                        </ul>
                    </div>
                </div>
            </nav>

            <!-- Nav tabs -->
            <!--<ul class="nav nav-tabs " role="tablist">
                <li role="presentation" id="basic_switch"><a class="no-radius" href="#basic" aria-controls="basic" role="tab"
                                                          data-toggle="tab">Basic Info</a></li>
                <li role="presentation" id="group_management_switch"><a class="no-radius" href="#group_management" aria-controls="group_management" role="tab"
                                           data-toggle="tab">Group Management</a></li>
                <li role="presentation" id="instance_management_switch"><a class="no-radius" href="#instance_management" aria-controls="instance_management" role="tab"
                                           data-toggle="tab">Instance Management</a></li>
            </ul>-->

            <!-- Tab panes -->
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane" id="basic">
                    {% include 'include/server_config_info.html' %}
                </div>
                <div role="tabpanel" class="tab-pane" id="group_management">
                    {% include 'include/server_config_group.html' %}
                </div>
                <div role="tabpanel" class="tab-pane" id="instance_management">
                    {% include 'include/server_config_instance.html' %}
                </div>

            </div>

        </div>

    </div>



{% endblock %}

{% block js %}
    <script type="text/javascript" src="/static/js/jquery.cookie.js"></script>
    <script type="text/javascript" src="/static/plugins/bootstrap/js/bootstrap.js"></script>
    <script type="text/javascript" src="/static/js/cores.js"></script>


    <!--<script type="text/javascript" src="/static/plugins/select2/select2.min.js"></script>
    <script type="text/javascript" src="/static/plugins/data-tables/jquery.dataTables.js"></script>
    <script type="text/javascript" src="/static/plugins/data-tables/DT_bootstrap.js"></script>

    <script src="/static/js/app.js"></script>-->

    <script src="/static/plugins/bootstrap/js/bootstrap-table.js"></script>

    <script src="/static/js/server-config-group.js"></script>
    <script src="/static/js/server-config-instance.js"></script>

    <script>
        $(function () {
            $.initMenu('#menu_asset');

            var groupTable = new GroupTableInit();
            groupTable.Init({{ response.data.id }});

            var instanceTable = new InstanceTableInit();
            instanceTable.Init({{ response.data.id }});
        });



        function GetQueryString(name) {
            var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
            var r = window.location.search.substr(1).match(reg);
            if(r!=null)return (r[2]); return null;
        }

        $(document).ready(function(){
            var active_tab = GetQueryString("active")

            if (active_tab) {
                var active_tab_id = "#" + active_tab
                var active_switch_id = "#" + active_tab + "_switch"
            }
            else {
                var active_tab_id = "#basic"
                var active_switch_id = "#basic_switch"
            }
            $(active_switch_id).addClass('active').siblings().removeClass('active');
            $(active_tab_id).addClass('active').siblings().removeClass('active');
        });

    </script>

{% endblock %}