{% extends 'layout/_layout.html' %}

{% block css %}


{% endblock %}

{% block conent %}

    <ol class="breadcrumb" style="margin-bottom: 0;">
        <div class='btn-group btn-group-xs'>
            <a type="button" class="btn btn-default btn-arrow-right btn-arrow-left:before" style="color:#1c5a9c; padding-left:10px"><span class="glyphicon glyphicon-home" aria-hidden="true"></span> Dashboard</a>
            <a type="button" class="btn btn-default btn-arrow-right" style="color:#1c5a9c;" href="/server.html"><span class="glyphicon glyphicon-th-list" aria-hidden="true"></span> Application</a>
        </div>
    </ol>

    <div style="padding: 5px 8px;">

        <div class="list-block">
            <div class="clearfix search-area">

                <div class="col-md-offset-10 do-submit">
                    <a id="search_condition_submit" class="btn btn-primary no-radius">
                        <i class="fa fa-search"></i> Search
                    </a>
                </div>

                <div id="search_conditions" class="col-md-offset-2 col-md-8">
                    <div class="condition">
                        <div class="icons">
                            <a class="btn btn-default no-radius" onclick="$.AddSearchCondition(this)"><i
                                    class="fa fa-plus-square"></i></a>
                        </div>
                        <div class="inputs">
                            <div class="input-group">
                                <div id="search_condition" init="false" class="input-group-btn">
                                    <label type="button" class="btn btn-default no-radius" style="width: 100px;">&nbsp;</label>
                                    <button type="button" class="btn btn-default dropdown-toggle no-border-r" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button>
                                    <ul class="change-search-condition dropdown-menu">

                                    </ul>
                                </div>

                            </div>

                        </div>
                    </div>
                </div>

            </div>

            <div class="clearfix function-area">
                <div class="btn-group custom-btn-group">
                    <a class="btn btn-default no-radius" href="/user_center/permission-add.html"><i class="fa fa-plus-circle"></i> Create Url</a>
                    <a id="do_refresh" class="btn btn-default no-radius"><i class="fa fa-refresh"></i> Refresh</a>
                    <a id="handle_status" class="btn no-radius" tabindex="0" role="button" data-toggle="manual"
                       data-trigger="focus" data-container="body" data-html="true" data-placement="bottom" title="错误详细"
                       data-content=""></a>
                </div>
            </div>

            <div class="table-responsive table-area">
                <table class="table table-striped table-bordered">
                    <!-- 表格标题开始 -->
                    <thead id="table_head">
                    <tr>

                    </tr>
                    </thead>
                    <!-- 表格标题结束 -->

                    <!-- 表格内容开始 -->
                    <tbody id="table_body" edit-mode='false'>

                    </tbody>
                    <!-- 表格内容结束 -->

                </table>
                <div class="clearfix">
                    <div class="right">
                        <ul id="pager" class="pagination pagination-sm no-margin">

                        </ul>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- modal -->
    <div class="modal fade" id="url_delete_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content" style="margin-top: 150px">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabel">Delete Url Permission</h4>
                </div>
                <div class="modal-body" id="delete_data_html_area"></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="delete_url_permission_fn" onclick="delete_url_fn()">Delete</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>

{% endblock %}

{% block js %}
    <script type="text/javascript" src="/static/js/jquery.cookie.js"></script>
    <script type="text/javascript" src="/static/plugins/bootstrap/js/bootstrap.js"></script>
    <script type="text/javascript" src="/static/js/cores.js"></script>
    <script type="text/javascript" src="/static/js/server-list.js"></script>

    <script>
        $(function () {
            $.initMenu('#menu_permission_list');
            $.nbDataList('/user_center/permission-json.html');
        });

        function delete_url_fn(obj_id) {
            $("#delete_data_html_area").html("Confirm remove Url Permission?");
            $("#delete_url_permission_fn").attr("onclick", "do_delete_url(" + obj_id + ")");
            $("#url_delete_modal").modal('show')
        }

        function do_delete_url(obj_id) {
            $.ajax({
                url: '/user_center/permission-json.html',
                type: 'delete',
                dataType: 'json',
                traditional:true,
                data: {'obj_id': obj_id},
                success: function (data, response, status) {
                    $("#url_delete_modal").modal('hide');
                    $('#do_refresh').trigger("click");
                }
            });
        }

    </script>
{% endblock %}